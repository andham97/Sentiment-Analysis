<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../">
  <title data-ice="title">client/components/dashboard/NewSearch.js | sentiment-analysis</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/andham97/Sentiment-Analysis"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/App.js~App.html">App</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components">components</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/components/Button.js~Button.html">Button</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/components/Card.js~Card.html">Card</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/components/Checkbox.js~Checkbox.html">Checkbox</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/components/DatePickerInterval.js~DatePickerInterval.html">DatePickerInterval</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/components/ErrorBoundary.js~ErrorBoundary.html">ErrorBoundary</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/components/Filter.js~Filter.html">Filter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/components/LoadingPage.js~LoadingPage.html">LoadingPage</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/components/TimeInterval.js~TimeInterval.html">TimeInterval</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-admin">components/admin</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/components/admin/AdminPanel.js~AdminPanel.html">AdminPanel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/components/admin/AdminPanelStore.js~AdminPanelStore.html">AdminPanelStore</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/components/admin/MultiListInput.js~MultiListInput.html">MultiListInput</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/components/admin/Scraper.js~Scraper.html">Scraper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-AdminPanelContext">AdminPanelContext</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-dashboard">components/dashboard</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/components/dashboard/Dashboard.js~Dashboard.html">Dashboard</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/components/dashboard/SearchStore.js~SearchStore.html">SearchStore</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SearchContext">SearchContext</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-result">components/result</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/components/result/NewsArticle.js~NewsArticle.html">NewsArticle</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/components/result/NewsArticleSentiment.js~NewsArticle.html">NewsArticle</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/components/result/NoResult.js~NoResult.html">NoResult</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/components/result/Parameters.js~Paramteres.html">Paramteres</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/components/result/Result.js~Result.html">Result</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/components/result/ResultSentiment.js~ResultSentiment.html">ResultSentiment</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-result-graph">components/result/graph</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/client/components/result/graph/DonutChart.js~DonutChart.html">DonutChart</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-ProgressBar">ProgressBar</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">client/components/dashboard/NewSearch.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import React, { Component } from &apos;react&apos;;
import &apos;../style/NewSearch.css&apos;;
import { FaTimes } from &apos;react-icons/fa&apos;;
import PropTypes from &apos;prop-types&apos;;
import { withRouter } from &apos;react-router&apos;;
import Alert from &apos;react-s-alert&apos;;
import DatePickerInterval from &apos;../DatePickerInterval&apos;;
import Checkbox from &apos;../Checkbox&apos;;
import SearchButton from &apos;../Button&apos;;
import &apos;react-dates/initialize&apos;;
import &apos;react-dates/lib/css/_datepicker.css&apos;;
import &apos;../style/react_dates_overrides.css&apos;;
import { SearchContext } from &apos;./SearchStore&apos;;
import &apos;react-datepicker/dist/react-datepicker.css&apos;;

/**
 * Emotion checkbox
 * @type {Array&lt;Object&gt;}
 */
const checkboxesEmotions = [
  {
    name: &apos;analysis_filter_emotions&apos;,
    key: &apos;joy&apos;,
    value: &apos;Joy&apos;,
  },
  {
    name: &apos;analysis_filter_emotions&apos;,
    key: &apos;anger&apos;,
    value: &apos;Anger&apos;,
  },
  {
    name: &apos;analysis_filter_emotions&apos;,
    key: &apos;disgust&apos;,
    value: &apos;Disgust&apos;,
  },
  {
    name: &apos;analysis_filter_emotions&apos;,
    key: &apos;sadness&apos;,
    value: &apos;Sadness&apos;,
  },
  {
    name: &apos;analysis_filter_emotions&apos;,
    key: &apos;fear&apos;,
    value: &apos;Fear&apos;,
  },
];

/**
 * @class
 * @extends Component
 *
 * @reactProps {Object} history
 */
class NewSearch extends Component {
  constructor(props) {
    super(props);
    this.state = {
      checkedItemsNews: [],
      checkedItemsEmotion: [],
      show: false,
      news_search: &apos;&apos;,
      search: &apos;&apos;,
      neutralThreshold: &apos;0.2&apos;,
    };
    this.handleChangeCheckboxNews = this.handleChangeCheckboxNews.bind(this);
    this.handleChangeCheckboxEmotion = this.handleChangeCheckboxEmotion.bind(this);
    this.handleFilterClick = this.handleFilterClick.bind(this);
    this.dateChange = this.dateChange.bind(this);
    this.handleSearch = this.handleSearch.bind(this);
    this.handleInput = this.handleInput.bind(this);
  }

  componentWillMount() {
    this.context.getSources();
  }

  /**
   * Update search text
   *
   * @function updateSearch
   * @param  {Object}     event
   */
  updateSearch(event) {
    this.setState({ news_search: event.target.value });
  }

  /**
   * Advanced filter
   *
   * @function handleFilterClick
   */
  handleFilterClick() {
    const { buttonclicked } = this.state;
    this.setState({ buttonclicked: !buttonclicked });
  }

  /**
   * Checkbox click
   *
   * @function handleChecked
   */
  handleChecked() {
    this.setState({
      show: !this.state.show,
      checkedItemsEmotion: [],
    });
  }

  /**
   * News checkbox click
   *
   * @function handleChangeCheckboxNews
   * @param  {Object}                 e
   */
  handleChangeCheckboxNews(e) {
    const item = e.target.value;
    const { checkedItemsNews } = this.state;
    if (checkedItemsNews.indexOf(item) &gt; -1)
      checkedItemsNews.splice(checkedItemsNews.indexOf(item), 1);
    else
      checkedItemsNews.push(item);
    this.setState({
      ...this.state,
      checkedItemsNews,
    });
  }

  /**
   * Emotion checkbox click handle
   *
   * @function handleChangeCheckboxEmotion
   * @param  {Object}                    e
   */
  handleChangeCheckboxEmotion(e) {
    const item = e.target.value;
    const { checkedItemsEmotion } = this.state;
    if (checkedItemsEmotion.indexOf(item) &gt; -1)
      checkedItemsEmotion.splice(checkedItemsEmotion.indexOf(item), 1);
    else
      checkedItemsEmotion.push(item);
    this.setState({
      ...this.state,
      checkedItemsEmotion,
    });
  }

  /**
   * Date change handler
   *
   * @function dateChange
   * @param  {Date}   startDate
   * @param  {Date}   endDate
   */
  dateChange(startDate, endDate) {
    this.setState({
      ...this.state,
      startDate,
      endDate,
    });
  }

  /**
   * Performes the search
   *
   * @function handleSearch
   * @param  {string}     searchdata
   */
  handleSearch(searchdata) {
    if (!searchdata.search || searchdata.search === &apos;&apos; || searchdata.search.split(&apos; &apos;).filter(elem =&gt; elem !== &apos;&apos;).length === 0)
      return Alert.error(&apos;The provided search query is empty&apos;, {
        position: &apos;top&apos;,
        effect: &apos;stackslide&apos;,
      });
    searchdata.neutralThreshold = Number(searchdata.neutralThreshold);
    this.context.getSearch(searchdata);
    this.props.history.push(&apos;/result&apos;);
  }

  /**
   * Handle search update
   *
   * @function handleInput
   * @param  {Object}    event
   */
  handleInput(event) {
    this.setState({
      ...this.state,
      search: event.target.value,
    });
  }

  render() {
    const filterNews = this.context.sources.filter(
      item =&gt; item.value.toLowerCase().indexOf(this.state.news_search.toLowerCase()) !== -1,
    );
    const { buttonclicked } = this.state;
    const searchdata = this.state;
    return (
      &lt;div className=&apos;content&apos; &gt;
        &lt;div className=&apos;container_top&apos;&gt;
          &lt;div className=&apos;title&apos;&gt;New Search&lt;/div&gt;
        &lt;/div&gt;
        &lt;hr style = {{ margin: &apos;0px&apos;, opacity: &apos;0.2&apos; }} /&gt;
        {!buttonclicked
          ? (&lt;div className=&apos;container_main&apos;&gt;
          &lt;div className=&apos;flexContainer input&apos;&gt;
            &lt;input className=&apos;searchfield&apos; type=&apos;text&apos; placeholder=&apos;  Search...&apos; onChange={this.handleInput} onKeyDown={(e) =&gt; {
              if (e.keyCode === 13)
                this.handleSearch(searchdata);
            }}&gt;&lt;/input&gt;
          &lt;/div&gt;
          &lt;div className=&apos;flexContainer buttons&apos;&gt;
            &lt;button className=&apos;add_filter&apos; onClick={this.handleFilterClick}&gt;Add filters&lt;/button&gt;
            &lt;SearchButton onClick={() =&gt; this.handleSearch(searchdata)} title=&apos;Search&apos;/&gt;
          &lt;/div&gt;
        &lt;/div&gt;)
          : (
            &lt;div className=&apos;container_filter&apos;&gt;
              &lt;div className = &apos;flexContainer input_filter&apos;&gt;
                &lt;input className =&apos;searchfield_filter&apos; type=&apos;text&apos; placeholder=&apos;  Search...&apos; onChange={this.handleInput} onKeyDown={(e) =&gt; {
                  if (e.keyCode === 13)
                    this.handleSearch(searchdata);
                }}&gt;&lt;/input&gt;
                &lt;SearchButton onClick={() =&gt; this.handleSearch(searchdata)} title=&apos;Search&apos; /&gt;
              &lt;/div&gt;
                &lt;hr style = {{ margin: &apos;0px&apos;, opacity: &apos;0.2&apos; }} /&gt;
                &lt;div className = &apos;exit_filter&apos; onClick={this.handleFilterClick}&gt; &lt;FaTimes /&gt; &lt;/div&gt;
              &lt;div id=&apos;filter&apos; className=&apos;flexContainer apply_filter&apos;&gt;
                &lt;div className=&apos;filter_analysis&apos;&gt;
                  &lt;div className=&apos;title_Analysis&apos;&gt; Analysis &lt;/div&gt;
                  &lt;form&gt;
                    &lt;div className=&apos;analysis-check&apos;&gt;
                      &lt;label&gt;
                        &lt;input
                          type=&apos;radio&apos;
                          name=&apos;analysis_filter&apos;
                          value=&apos;sentiment&apos;
                          className=&apos;analysis-check-input&apos;
                          checked={this.state.show === false}
                          onChange={() =&gt; this.handleChecked()}
                        /&gt;
                         Sentiment
                      &lt;/label&gt;
                    &lt;/div&gt;
                    {!this.state.show ? &lt;div&gt;Neutral sentiment threshold: {`\xB1 ${this.state.neutralThreshold}`}&lt;br /&gt;
                      &lt;input
                        type=&apos;range&apos;
                        min={0}
                        max={20}
                        value={this.state.neutralThreshold * 20}
                        onChange={(e) =&gt; {
                          this.setState({
                            ...this.state,
                            neutralThreshold: e.target.value / 20,
                          });
                        }} /&gt;
                      &lt;/div&gt; : null}
                    &lt;div className=&apos;analysis-check&apos;&gt;
                    &lt;div className=&apos;checkbox&apos;&gt;
                      &lt;label&gt;
                        &lt;input
                          type=&apos;radio&apos;
                          name=&apos;analysis_filter&apos;
                          value=&apos;emotion&apos;
                          className=&apos;analysis-check-input&apos;
                          checked={this.state.show === true}
                          onChange={() =&gt; this.handleChecked()}
                        /&gt;
                         Emotion
                      &lt;/label&gt;
                      &lt;br /&gt;
                      &lt;div className=&apos;analysis-check-input-checkbox&apos;&gt;
                        {
                        this.state.show
                          ? checkboxesEmotions.map(item =&gt; (
                            &lt;div key={item.key}&gt;
                              &lt;Checkbox
                                id={item.key}
                                value={item.value}
                                checked={this.state.checkedItemsEmotion.indexOf(item.key) &gt; -1}
                                onChange={e =&gt; this.handleChangeCheckboxEmotion(e)}
                                className=&apos;checkbox_emotion&apos;
                                name=&apos;emotion&apos;
                              /&gt;
                            &lt;/div&gt;
                          ))
                          : null
                        }
                      &lt;/div&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;
                  &lt;/form&gt;
                &lt;/div&gt;
                &lt;div className=&apos;filter_source&apos;&gt;
                  &lt;div className=&apos;title_Analysis&apos;&gt; News Source &lt;/div&gt;
                    &lt;div&gt;
                      &lt;input type=&apos;text&apos;
                        className=&apos;searchNews&apos;
                        value={this.state.news_search}
                        onChange={this.updateSearch.bind(this)}
                        placeholder=&apos; News Source...&apos;
                      /&gt;
                      {filterNews.map(item =&gt; &lt;Checkbox
                        key={item.key}
                        id={item.key}
                        value={item.value}
                        checked={this.state.checkedItemsNews.indexOf(item.key) &gt; -1}
                        onChange={e =&gt; this.handleChangeCheckboxNews(e)}
                      /&gt;)}
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;div className=&apos;filter_time&apos;&gt;
                  &lt;div className=&apos;title_Analysis&apos;&gt; Date Interval &lt;/div&gt;
                  &lt;DatePickerInterval change={dates =&gt; this.setState({
                    ...this.state,
                    ...dates,
                  })} style={&apos;../style/DatePickerInterval.css&apos;} /&gt;
                    &lt;p&gt;Choose from and to date&lt;/p&gt;
                &lt;/div&gt;
              &lt;/div&gt;
            &lt;/div&gt;
          )
        }
      &lt;/div&gt;);
  }
}

NewSearch.propTypes = {
  checkboxesNews: PropTypes.any,
  searchdata: PropTypes.any,
  history: PropTypes.any,
};

NewSearch.contextType = SearchContext;

export default withRouter(NewSearch);
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
